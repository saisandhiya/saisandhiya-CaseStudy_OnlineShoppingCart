<app-customer-navbar></app-customer-navbar>

<div class="container">
  <div class="row mt-5 d-flex justify-content-center">
    <button class="btn btn-outline-success" data-bs-toggle="modal" data-bs-target="#staticBackdrop">Add address</button>
  </div>
</div>


<div class="container mt-5">
    <div class="row">
      <div class="address-container d-flex">
        <div class="address-card" *ngFor="let address of addresses" [ngClass]="{ 'selected': address === selectedAddress }" (click)="selectAddress(address)">
          <div class="card">
            <div class="card-header">
              <h5 class="card-title">{{ address.fullName }}</h5>
            </div>
            <div class="card-body">
              <ul class="list-group list-group-flush">
                <li class="list-group-item">
                  <strong>Full Name:</strong> {{ address.fullName }}
                </li>
                <li class="list-group-item">
                  <strong>Flat Number:</strong> {{ address.flatNumber }}
                </li>
                <li class="list-group-item">
                  <strong>City:</strong> {{ address.city }}
                </li>
                <li class="list-group-item">
                  <strong>Mobile Number:</strong> {{ address.mobileNumber }}
                </li>
                <li class="list-group-item">
                  <strong>Pin Code:</strong> {{ address.pincode }}
                </li>
                <li class="list-group-item">
                  <strong>State:</strong> {{ address.state }}
                </li>
                <li class="list-group-item">
                  <button class="btn btn-danger" (click)="deleteAddress(address.customerId)" [disabled]="!deleteButton">delete</button>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>


  <div class="float-center mx-5 my-5">
    <div style="text-align: center;text-decoration: underline;">
      <strong>PAYMENT MODE:</strong>
      <hr>
    </div>
    <div class="form-check form-check-inline float-center">
      <input class="form-check-input" type="radio" id="creditCard" value="CREDIT_CARD" [(ngModel)]="paymentMode">
      <label class="form-check-label" for="creditCard">Credit Card</label>
    </div>
    <div class="form-check form-check-inline float-center">
      <input class="form-check-input" type="radio" id="debitCard" value="DEBIT_CARD" [(ngModel)]="paymentMode">
      <label class="form-check-label" for="debitCard">Debit Card</label>
    </div>
    <div class="form-check form-check-inline float-center">
        <input class="form-check-input" type="radio" id="cod" value="COD" [(ngModel)]="paymentMode">
        <label class="form-check-label" for="debitCard">cash on delivery</label>
      </div>
  </div>










  <div
        style="width: 90%; margin-left: auto; margin-right: auto; margin-top: 2%; display: flex; align-items: center; justify-content: end; margin-bottom: 2%;">


        <div style="margin-right: 2%;">
            <button class="cart-button" style="color: #B94357; border: 1.5px solid #B94357;" (click)="goBack()">Back</button>
        </div>



        <div>
            <button class="cart-button"
                style="color: black; border: 1.5px solid black;" (click)="checkOut();placeOrder()" [disabled]="!orderButton"  data-bs-toggle="modal" data-bs-target="#transaction">Pay Order</button>
        </div>

    </div>








<!-- Modal -->
<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="staticBackdropLabel">Add Address</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
      <form [formGroup]="addressForm" class="mx-3" (ngSubmit)="saveAddress(addressForm.value)">
          <div class="mb-3">
            <label for="fullName" class="form-label">Full Name:</label>
            <input type="text" class="form-control" id="fullName" formControlName="fullName">
            <div *ngIf="addressForm.controls.fullName.invalid && (addressForm.controls.fullName.dirty || addressForm.controls.fullName.touched)">
              <small class="text-danger">Full Name is required.</small>
            </div>
          </div>

          <div class="mb-3">
            <label for="flatNumber" class="form-label">Flat Number:</label>
            <input type="text" class="form-control" id="flatNumber" formControlName="flatNumber">
            <div *ngIf="addressForm.controls.flatNumber.invalid && (addressForm.controls.flatNumber.dirty || addressForm.controls.flatNumber.touched)">
              <small class="text-danger">Flat Number is required.</small>
            </div>
          </div>

          <div class="mb-3">
            <label for="city" class="form-label">City:</label>
            <input type="text" class="form-control" id="city" formControlName="city">
            <div *ngIf="addressForm.controls.city.invalid && (addressForm.controls.city.dirty || addressForm.controls.city.touched)">
              <small class="text-danger">City is required.</small>
            </div>
          </div>

          <div class="mb-3">
            <label for="mobileNumber" class="form-label">Mobile Number:</label>
            <input type="tel" class="form-control" id="mobileNumber" formControlName="mobileNumber">
            <div *ngIf="addressForm.controls.mobileNumber.invalid && (addressForm.controls.mobileNumber.dirty || addressForm.controls.mobileNumber.touched)">
              <small class="text-danger">Enter a valid mobile number.</small>
            </div>
          </div>

          <div class="mb-3">
            <label for="pinCode" class="form-label">Pin Code:</label>
            <input type="text" class="form-control" id="pinCode" formControlName="pincode">
            <div *ngIf="addressForm.controls.pincode.invalid && (addressForm.controls.pincode.dirty || addressForm.controls.pincode.touched)">
              <small class="text-danger">Pin Code is required.</small>
            </div>
          </div>

          <div class="mb-3">
            <label for="state" class="form-label">State</label>
            <input type="text" class="form-control" id="state" formControlName="state">
            <div *ngIf="addressForm.controls.state.invalid && (addressForm.controls.state.dirty || addressForm.controls.state.touched)">
              <small class="text-danger">State is required.</small>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-success" [disabled]="addressForm.invalid" (click)="saveAddress(addressForm.value)">Save</button>
      </div>
    </div>
  </div>
</div>



<div class="modal fade" id="transaction" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="staticBackdropLabel">Transaction Status</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="container mt-5">
          <div class="row">
            <div class="col">
              <div class="card">
                <div class="card-header">
                  <h5 class="card-title">
                    <img src="https://img.freepik.com/premium-vector/green-check-mark-icon-symbol-logo-circle-tick-symbol-green-color-vector-illustration_685751-503.jpg?w=360" alt="" height="50px" width="50px">
                  </h5>
                </div>
                <div class="card-body text-align-center">
                  <ul class="list-group list-group-flush">
                    <li class="list-group-item"><strong>Transaction ID:</strong> {{ transaction.transactionId }}</li>
                    <li class="list-group-item"><strong>Cart ID:</strong> {{ transaction.cartId }}</li>
                    <li class="list-group-item"><strong>User Name:</strong> {{ transaction.userName }}</li>
                    <li class="list-group-item"><strong>Amount:</strong> <span>&#8377;</span>{{ transaction.amount }}</li>
                    <li class="list-group-item"><strong>Transaction Status:</strong> {{ transaction.transactionStatus }}</li>
                    <li class="list-group-item"><strong>Payment Mode:</strong> {{ transaction.paymentMode }}</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>









